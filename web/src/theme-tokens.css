/**
 * ChatGPA Theme System V2
 * Comprehensive token-based design system with theme presets
 *
 * Architecture:
 * - Semantic tokens (--bg, --surface, --text, etc.)
 * - Theme presets via [data-theme] (academic-dark, academic-light, midnight-focus)
 * - Accent presets via [data-accent] (coral, leaf, focus)
 * - Font presets via [data-font] (inter, georgia, system)
 * - Contrast levels via [data-contrast] (normal, high)
 * - Motion preferences via [data-motion] (full, reduced)
 *
 * Last Updated: 2025-11-18
 * Version: 2.0.0
 */

/* ========================================
   BASE TOKEN DEFINITIONS (Academic Dark Default)
   ======================================== */

:root,
:root[data-theme="academic-dark"] {
  /* ===== Base Neutrals (Layout) - Deep Blue Academic palette ===== */
  /* Inspired by Notion + Spotify with cool blue tones */
  --bg: #0d1117;              /* Deep blue-black base (GitHub-inspired) */
  --surface: #161b22;          /* Lifted blue surface */
  --surface-raised: #1f2937;   /* Cards, modals, elevated elements */
  --surface-subtle: #0a0e13;   /* Pressed states, deeper than bg */
  --border-subtle: rgba(110, 140, 251, 0.08);  /* Blue-tinted subtle borders */
  --border-strong: rgba(110, 140, 251, 0.15);  /* Blue-tinted separators */
  --overlay: rgba(0, 0, 0, 0.80);  /* Modal/dialog overlay */

  /* ===== Text Hierarchy ===== */
  --text: rgba(255, 255, 255, 0.98);
  --text-muted: rgba(255, 255, 255, 0.75);
  --text-soft: rgba(255, 255, 255, 0.55);
  --text-danger: #EF4444;
  --text-success: #48E28A;
  --text-warning: #FBBF24;

  /* ===== State & Scoring ===== */
  --score-pass: #48E28A;
  --score-fail: #EF4444;

  /* ===== Chip/Badge Tokens ===== */
  --chip-bg: rgba(255, 255, 255, 0.08);
  --chip-border: rgba(255, 255, 255, 0.12);

  /* ===== Legacy Aliases (Backward Compatibility) ===== */
  --fg: var(--text);
  --fg-muted: var(--text-muted);
  --card: var(--surface-raised);
  --border: var(--border-subtle);
  --success: var(--text-success);
  --danger: var(--text-danger);
  --warning: var(--text-warning);

  /* ===== Motion Tokens ===== */
  --motion-duration-fast: 100ms;
  --motion-duration-normal: 180ms;
  --motion-duration-slow: 250ms;
  --motion-ease: cubic-bezier(0.4, 0, 0.2, 1);

  /* ===== Font Stacks ===== */
  --font-sans: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  --font-serif: Georgia, "Times New Roman", serif;
  --font-system: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  --font-body: var(--font-sans);
}

/* ========================================
   THEME PRESETS
   ======================================== */

/* Academic Light Theme - Soft blue-tinted whites */
:root[data-theme="academic-light"] {
  --bg: #fafbfc;              /* Soft off-white (not harsh pure white) */
  --surface: #f3f4f6;          /* Subtle gray with blue hint */
  --surface-raised: #ffffff;   /* Pure white for clear elevation */
  --surface-subtle: #e5e7eb;   /* Deeper for pressed states */
  --border-subtle: rgba(73, 101, 204, 0.08);   /* Blue-tinted subtle borders */
  --border-strong: rgba(73, 101, 204, 0.12);   /* Blue-tinted separators */
  --overlay: rgba(0, 0, 0, 0.40);  /* Modal overlay */

  --text: #1A1D21;
  --text-muted: #60656B;
  --text-soft: #8B9097;
  --text-danger: #B91C1C;
  --text-success: #16A34A;
  --text-warning: #D97706;

  --score-pass: #16A34A;
  --score-fail: #B91C1C;

  --chip-bg: rgba(73, 101, 204, 0.06);
  --chip-border: rgba(73, 101, 204, 0.10);
}

/* Midnight Focus Theme - Ultra-deep OLED darkness for extreme focus */
:root[data-theme="midnight-focus"] {
  --bg: #050609;              /* Near-black with subtle blue tint (OLED-friendly) */
  --surface: #0a0d12;          /* Deeper than academic-dark */
  --surface-raised: #0f1419;   /* Still deep but elevated */
  --surface-subtle: #020305;   /* Actually subtle - deeper than bg */
  --border-subtle: rgba(110, 140, 251, 0.06);  /* Blue-tinted, barely visible */
  --border-strong: rgba(110, 140, 251, 0.12);  /* Blue-tinted separators */
  --overlay: rgba(0, 0, 0, 0.90);  /* Very dark overlay */

  --text: rgba(255, 255, 255, 0.98);
  --text-muted: rgba(255, 255, 255, 0.65);
  --text-soft: rgba(255, 255, 255, 0.45);
  --text-danger: #F97373;
  --text-success: #48E28A;
  --text-warning: #FBBF24;

  --score-pass: #48E28A;
  --score-fail: #F97373;

  --chip-bg: rgba(255, 255, 255, 0.04);
  --chip-border: rgba(255, 255, 255, 0.08);
}

/* ========================================
   ACCENT PRESETS
   ======================================== */

/* Primary accent: Study Blue */
:root,
:root[data-accent="study-blue"] {
  --accent: #5b7ae6;              /* Brightened for deep bg */
  --accent-soft: rgba(91, 122, 230, 0.15);  /* More visible glow */
  --accent-strong: #4965cc;       /* Original blue for hover */
  --accent-text: rgba(255, 255, 255, 0.98);

  /* Legacy brand tokens for backward compatibility */
  --brand-500: #5b7ae6;
  --brand-600: #4965cc;
  --brand-400: #7a95ff;
  --brand-contrast: rgba(255, 255, 255, 0.98);
}

/* Alternative: Leaf (green accent) */
:root[data-accent="leaf"] {
  --accent: #48E28A;
  --accent-soft: rgba(72, 226, 138, 0.12);
  --accent-strong: #22C55E;
  --accent-text: rgba(255, 255, 255, 0.98);

  /* Legacy accent tokens */
  --accent-500: #2FB879;
  --accent-600: #239C63;
  --accent-400: #56CB94;
  --accent-contrast: rgba(255, 255, 255, 0.98);
}

/* ========================================
   THEME-SPECIFIC ACCENT ADJUSTMENTS
   ======================================== */

/* Academic Light: Darker accent for better contrast on light backgrounds */
:root[data-theme="academic-light"][data-accent="study-blue"] {
  --accent: #4965cc;              /* Darker for better contrast */
  --accent-soft: rgba(73, 101, 204, 0.12);
  --accent-strong: #3d55b3;       /* Even darker for hover */
  --accent-text: rgba(255, 255, 255, 0.98);
}

/* Midnight Focus: Brighter accent for maximum contrast on ultra-dark bg */
:root[data-theme="midnight-focus"][data-accent="study-blue"] {
  --accent: #7a95ff;              /* Much brighter for ultra-dark bg */
  --accent-soft: rgba(122, 149, 255, 0.18);  /* More visible glow */
  --accent-strong: #5b7ae6;       /* Slightly dimmed for hover */
  --accent-text: rgba(255, 255, 255, 0.98);
}

/* ========================================
   FONT PRESETS
   ======================================== */

:root[data-font="inter"] {
  --font-body: "Inter", var(--font-sans);
}

:root[data-font="georgia"] {
  --font-body: var(--font-serif);
}

:root[data-font="system"] {
  --font-body: var(--font-system);
}

/* ========================================
   CONTRAST PRESETS
   ======================================== */

:root[data-contrast="normal"] {
  /* Already defined in base theme - these are the defaults */
}

:root[data-contrast="high"] {
  --text: #FFFFFF;
  --text-muted: #D0D4D8;
  --text-soft: #B4BAC2;
}

/* ========================================
   MOTION PRESETS
   ======================================== */

:root[data-motion="full"] {
  /* Already defined in base - these are the defaults */
}

:root[data-motion="reduced"] {
  --motion-duration-fast: 0ms;
  --motion-duration-normal: 0ms;
  --motion-duration-slow: 0ms;
  --motion-ease: linear;
}

/* Respect system motion preference */
@media (prefers-reduced-motion: reduce) {
  :root:not([data-motion="full"]) {
    --motion-duration-fast: 0ms;
    --motion-duration-normal: 0ms;
    --motion-duration-slow: 0ms;
    --motion-ease: linear;
  }
}

/* ========================================
   SEMANTIC QUIZ TOKENS (Backward Compatibility)
   ======================================== */

:root {
  --quiz-mcq: var(--accent);
  --quiz-typing: var(--accent-strong);
  --quiz-hybrid: #8B8EF7;
  --info: #2E90FA;
}

/* ========================================
   DEV MODE HELPER
   ======================================== */

@media screen {
  body::before {
    content: "ðŸŽ¨ " attr(data-theme) " | " attr(data-accent) " | " attr(data-font);
    position: fixed;
    bottom: 0;
    right: 0;
    padding: 4px 8px;
    font-size: 10px;
    background: var(--surface-raised);
    color: var(--text-soft);
    border: 1px solid var(--border-subtle);
    border-radius: 4px 0 0 0;
    z-index: 9999;
    opacity: 0.3;
    pointer-events: none;
  }
}
