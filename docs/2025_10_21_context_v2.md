ğŸ§­ ChatGPA Context Snapshot v2.1 (Finalized)
ğŸ¯ Mission

ChatGPA turns messy student notes into organized, adaptive study sessions.
MVP = upload notes â†’ summarize â†’ auto-quiz â†’ adaptive grading â†’ results.

ğŸ’» Tech Stack (verified)
Layer	Tech	Notes
Frontend	Vite + React + TypeScript + Tailwind	Uses vite.config.ts, React Router.
Backend	Vercel Functions	/api/*.ts endpoints (no App Router).
Database / Auth / Storage	Supabase (Postgres + Auth + Storage)	RLS = user_id = auth.uid().
Payments	Stripe	Two paid tiers: Monthly ($9) and Annual ($79).
AI	Claude or GPT-5	/api/summarize, /api/generate-quiz, /api/grade.
ğŸ’° Pricing / Entitlements
Tier	Price	Description
Free	$0	1 class + 5 quizzes total
Monthly Pro	$9 / month	Unlimited (fair use)
Annual Pro	$79 / year	Unlimited (fair use)

Enum â†’ tier enum ('free', 'monthly', 'annual')

ğŸ—‚ Database Tables
Table	Purpose
classes	Userâ€™s study subjects
notes	Uploaded text / PDF summaries
quizzes	Quiz sessions (with embedded questions jsonb)
quiz_attempts	User answers + scores
usage_limits	Free-tier counters (quizzes, classes created)
subscriptions	Stripe webhook target (tier, renewal date)

âœ… No entitlements table; usage_limits + subscriptions cover everything.

ğŸ§± Migrations
supabase/
â”œâ”€â”€ 20251021_chatgpa_init.sql
â””â”€â”€ 20251021_storage_policies.sql
# optional later
â””â”€â”€ 20251021_chatgpa_patch_v1.sql

ğŸ” RLS & Storage

All user-owned rows â†’ user_id = auth.uid().

Storage bucket notes-files (private).

Prefix rule â†’ auth.uid()::text || '/%'.

âš™ï¸ Environment Variables
VITE_SUPABASE_URL=
VITE_SUPABASE_ANON_KEY=
SUPABASE_SERVICE_KEY=
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=
STRIPE_PRICE_MONTHLY=
STRIPE_PRICE_ANNUAL=
OPENAI_API_KEY=        # or ANTHROPIC_API_KEY
VITE_APP_NAME=ChatGPA

ğŸ§  API Endpoints (Vercel Functions)
Route	Purpose
/api/summarize	Summarize note â†’ bullets + key terms
/api/generate-quiz	Create 8â€“10 questions (MCQ + short)
/api/grade	Adaptive grading + feedback + score
/api/stripe/checkout	Start checkout session
/api/stripe/webhook	Update subscriptions + usage_limits
ğŸ§© Build Sequence

Supabase link & push â†’ confirm no diff.

Auth / RLS test (sign up â†’ class â†’ note).

Implement AI endpoints.

Dashboard UI (Classes â†’ Notes â†’ Quiz â†’ Results).

Stripe checkout + webhook for monthly / annual.

Free-tier guard using usage_limits.

Adaptive feedback UI.

Beta launch + Reddit validation.

ğŸª¶ Brand Direction

Tagline: â€œThe study system that grows with you.â€
Tone = calm and clear (Notion-like).

âœ… Alignment Summary
Category	Status
Mission	âœ…
Stack	âœ…
Schema	âœ…
Pricing	âœ… (Free + Monthly + Annual)
Migrations	âœ…
Frontend	âœ…
RLS & Storage	âœ…